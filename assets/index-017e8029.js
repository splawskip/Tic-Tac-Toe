(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=e(a);fetch(a.href,o)}})();function y(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function g(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,n,e){return n&&g(t.prototype,n),e&&g(t,e),t}function I(t){return+t.replace(/px/,"")}function R(t){var n=window.devicePixelRatio,e=getComputedStyle(t),r=I(e.getPropertyValue("width")),a=I(e.getPropertyValue("height"));t.setAttribute("width",(r*n).toString()),t.setAttribute("height",(a*n).toString())}function f(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=Math.random()*(n-t)+t;return Math.floor(r*Math.pow(10,e))/Math.pow(10,e)}function _(t){return t[f(0,t.length)]}var j=.00125,O=5e-4,L=9e-4,F=1e-5,M=6,D=80,$=.9,x=1.7,q=.2,B=.6,k=.03,z=.07,w=15,A=82,W=150,U=100,H=250,X=40,J=["#fcf403","#62fc03","#f4fc03","#03e7fc","#03fca5","#a503fc","#fc03ad","#fc03c2"];function E(t){var n=1920;return Math.log(t)/Math.log(n)}var b=function(){function t(n){y(this,t);var e=n.initialPosition,r=n.direction,a=n.confettiRadius,o=n.confettiColors,s=n.emojis,d=n.emojiSize,l=n.canvasWidth,u=f($,x,3),c=u*E(l);this.confettiSpeed={x:c,y:c},this.finalConfettiSpeedX=f(q,B,3),this.rotationSpeed=s.length?.01:f(k,z,3)*E(l),this.dragForceCoefficient=f(O,L,6),this.radius={x:a,y:a},this.initialRadius=a,this.rotationAngle=r==="left"?f(0,.2,3):f(-.2,0,3),this.emojiSize=d,this.emojiRotationAngle=f(0,2*Math.PI),this.radiusYUpdateDirection="down";var h=r==="left"?f(A,w)*Math.PI/180:f(-w,-A)*Math.PI/180;this.absCos=Math.abs(Math.cos(h)),this.absSin=Math.abs(Math.sin(h));var m=f(-W,0),v={x:e.x+(r==="left"?-m:m)*this.absCos,y:e.y-m*this.absSin};this.currentPosition=Object.assign({},v),this.initialPosition=Object.assign({},v),this.color=s.length?null:_(o),this.emoji=s.length?_(s):null,this.createdAt=new Date().getTime(),this.direction=r}return S(t,[{key:"draw",value:function(e){var r=this.currentPosition,a=this.radius,o=this.color,s=this.emoji,d=this.rotationAngle,l=this.emojiRotationAngle,u=this.emojiSize,c=window.devicePixelRatio;o?(e.fillStyle=o,e.beginPath(),e.ellipse(r.x*c,r.y*c,a.x*c,a.y*c,d,0,2*Math.PI),e.fill()):s&&(e.font="".concat(u,"px serif"),e.save(),e.translate(c*r.x,c*r.y),e.rotate(l),e.textAlign="center",e.fillText(s,0,0),e.restore())}},{key:"updatePosition",value:function(e,r){var a=this.confettiSpeed,o=this.dragForceCoefficient,s=this.finalConfettiSpeedX,d=this.radiusYUpdateDirection,l=this.rotationSpeed,u=this.createdAt,c=this.direction,h=r-u;if(a.x>s&&(this.confettiSpeed.x-=o*e),this.currentPosition.x+=a.x*(c==="left"?-this.absCos:this.absCos)*e,this.currentPosition.y=this.initialPosition.y-a.y*this.absSin*h+j*Math.pow(h,2)/2,this.rotationSpeed-=this.emoji?1e-4:F*e,this.rotationSpeed<0&&(this.rotationSpeed=0),this.emoji){this.emojiRotationAngle+=this.rotationSpeed*e%(2*Math.PI);return}d==="down"?(this.radius.y-=e*l,this.radius.y<=0&&(this.radius.y=0,this.radiusYUpdateDirection="up")):(this.radius.y+=e*l,this.radius.y>=this.initialRadius&&(this.radius.y=this.initialRadius,this.radiusYUpdateDirection="down"))}},{key:"getIsVisibleOnCanvas",value:function(e){return this.currentPosition.y<e+U}}]),t}();function G(){var t=document.createElement("canvas");return t.style.position="fixed",t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.left="0",t.style.zIndex="1000",t.style.pointerEvents="none",document.body.appendChild(t),t}function V(t){var n=t.confettiRadius,e=n===void 0?M:n,r=t.confettiNumber,a=r===void 0?t.confettiesNumber||(t.emojis?X:H):r,o=t.confettiColors,s=o===void 0?J:o,d=t.emojis,l=d===void 0?t.emojies||[]:d,u=t.emojiSize,c=u===void 0?D:u;return t.emojies&&console.error("emojies argument is deprecated, please use emojis instead"),t.confettiesNumber&&console.error("confettiesNumber argument is deprecated, please use confettiNumber instead"),{confettiRadius:e,confettiNumber:a,confettiColors:s,emojis:l,emojiSize:c}}var Y=function(){function t(n){var e=this;y(this,t),this.canvasContext=n,this.shapes=[],this.promise=new Promise(function(r){return e.resolvePromise=r})}return S(t,[{key:"getBatchCompletePromise",value:function(){return this.promise}},{key:"addShapes",value:function(){var e;(e=this.shapes).push.apply(e,arguments)}},{key:"complete",value:function(){var e;return this.shapes.length?!1:((e=this.resolvePromise)===null||e===void 0||e.call(this),!0)}},{key:"processShapes",value:function(e,r,a){var o=this,s=e.timeDelta,d=e.currentTime;this.shapes=this.shapes.filter(function(l){return l.updatePosition(s,d),l.draw(o.canvasContext),a?l.getIsVisibleOnCanvas(r):!0})}}]),t}(),K=function(){function t(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};y(this,t),this.activeConfettiBatches=[],this.canvas=n.canvas||G(),this.canvasContext=this.canvas.getContext("2d"),this.requestAnimationFrameRequested=!1,this.lastUpdated=new Date().getTime(),this.iterationIndex=0,this.loop=this.loop.bind(this),requestAnimationFrame(this.loop)}return S(t,[{key:"loop",value:function(){this.requestAnimationFrameRequested=!1,R(this.canvas);var e=new Date().getTime(),r=e-this.lastUpdated,a=this.canvas.offsetHeight,o=this.iterationIndex%10===0;this.activeConfettiBatches=this.activeConfettiBatches.filter(function(s){return s.processShapes({timeDelta:r,currentTime:e},a,o),o?!s.complete():!0}),this.iterationIndex++,this.queueAnimationFrameIfNeeded(e)}},{key:"queueAnimationFrameIfNeeded",value:function(e){this.requestAnimationFrameRequested||this.activeConfettiBatches.length<1||(this.requestAnimationFrameRequested=!0,this.lastUpdated=e||new Date().getTime(),requestAnimationFrame(this.loop))}},{key:"addConfetti",value:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=V(e),a=r.confettiRadius,o=r.confettiNumber,s=r.confettiColors,d=r.emojis,l=r.emojiSize,u=this.canvas.getBoundingClientRect(),c=u.width,h=u.height,m=h*5/7,v={x:0,y:m},N={x:c,y:m},p=new Y(this.canvasContext),C=0;C<o/2;C++){var P=new b({initialPosition:v,direction:"right",confettiRadius:a,confettiColors:s,confettiNumber:o,emojis:d,emojiSize:l,canvasWidth:c}),T=new b({initialPosition:N,direction:"left",confettiRadius:a,confettiColors:s,confettiNumber:o,emojis:d,emojiSize:l,canvasWidth:c});p.addShapes(P,T)}return this.activeConfettiBatches.push(p),this.queueAnimationFrameIfNeeded(),p.getBatchCompletePromise()}},{key:"clearCanvas",value:function(){this.activeConfettiBatches=[]}}]),t}();const i={$:{circleScore:document.querySelector('[data-game="circle-score"]'),drawScore:document.querySelector('[data-game="draw-score"]'),crossScore:document.querySelector('[data-game="cross-score"]'),currentPlayer:document.querySelector('[data-game="current-player"]'),fields:document.querySelectorAll('[data-game="field"]'),winnerContainer:document.querySelector('[data-game="winner-container"]'),playAgainButton:document.querySelector('[data-game="play-again-button"]')},JSConfetti:null,circleScore:0,drawScore:0,crossScore:0,winner:null,player1:"fa-circle",player2:"fa-xmark",round:1,boardState:[["","",""],["","",""],["","",""]],combinations:[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],handleReset(){i.$.playAgainButton.classList.remove("button--active"),i.$.fields.forEach(t=>{Array.from(t.classList).forEach(e=>{e!=="fa-solid"&&e.startsWith("fa")&&t.classList.remove(e)})}),i.boardState=[["","",""],["","",""],["","",""]],i.$.winnerContainer.classList.remove(`${i.winner}-winner`,"draw"),i.$.winnerContainer.innerHTML="",i.winner=null},handleDraw(){i.$.winnerContainer.classList.add("draw"),i.$.winnerContainer.innerHTML=`
        <div class="winner-container__players players">
          <i class="fa-solid ${i.player1}"></i>
          <i class="fa-solid ${i.player2}"></i>
        </div>
        <p class="winner-container__result result">Draw!</p>
    `,i.JSConfetti.addConfetti({emojis:["üôå","ü•±","ü§ù"],confettiNumber:35}),i.$.playAgainButton.classList.add("button--active")},handleWin(){const t=i.winner===i.player2;i.$.winnerContainer.classList.add(`${i.winner}-winner`),i.$.winnerContainer.innerHTML=`
      <i class="fa-solid ${i.winner}"></i>
      <p class="result">${t?"Cross":"Circle"} wins!</p>
    `,i.JSConfetti.addConfetti({emojis:[t?"‚ùå":"‚≠ïÔ∏è","üéâ","üéä","üç¨","ü•≥","üèÜ"],confettiNumber:35}),i.$.playAgainButton.classList.add("button--active")},handleCombinationsCheck(){const t=i.boardState.flat(),n={"fa-circle":[],"fa-xmark":[]};t.forEach((a,o)=>{n[a]&&n[a].push(o)});const e=i.combinations.some(a=>a.every(o=>n[i.player1].includes(o))),r=i.combinations.some(a=>a.every(o=>n[i.player2].includes(o)));e&&(i.winner=i.player1,i.$.circleScore.textContent=i.circleScore+1),r&&(i.winner=i.player2,i.$.crossScore.textContent=i.crossScore+1),i.winner&&i.handleWin(),i.boardState.flat().every(a=>a!=="")&&!i.winner&&(i.handleDraw(),i.$.drawScore.textContent=i.drawScore+1)},handlePick(t){const n=i.round%2===0,{row:e,column:r}=t.target.dataset,a=n?i.player2:i.player1;i.boardState[e][r]===""&&(i.$.currentPlayer.textContent=n?"circle":"cross",t.target.classList.add(a),i.boardState[e][r]=a,i.round+=1,i.handleCombinationsCheck())},bindEvents(){i.$.fields.forEach(t=>t.addEventListener("click",i.handlePick)),i.$.playAgainButton.addEventListener("click",i.handleReset)},setInstances(){i.JSConfetti=new K},init(){i.setInstances(),i.bindEvents()}};i.init();
